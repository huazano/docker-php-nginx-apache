# Plantilla de configuración Apache para {{DOMAIN}}
<VirtualHost *:80>
    ServerName {{DOMAIN}}
    ServerAlias www.{{DOMAIN}}
    DocumentRoot /var/www/html/{{DOMAIN}}
    
    # Logs específicos del sitio
    ErrorLog /var/log/apache2/{{DOMAIN}}_error.log
    CustomLog /var/log/apache2/{{DOMAIN}}_access.log combined
    
    # Configuración del directorio
    <Directory /var/www/html/{{DOMAIN}}>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Configuración para PHP
        DirectoryIndex index.php index.html index.htm
        
        # Rewrite rules para aplicaciones modernas
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php [QSA,L]
    </Directory>
    
    # Configuración de seguridad
    <Files ".ht*">
        Require all denied
    </Files>
    
    # Configuración PHP
    <FilesMatch "\.php$">
        SetHandler "proxy:fcgi://php-fpm:9000"
    </FilesMatch>
</VirtualHost>